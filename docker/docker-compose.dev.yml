# docker-compose --env-file ../.env -p movienite -f docker-compose.yml -f docker-compose.dev.yml up -d --build
services:
  movienite-api:
    environment:
      - PYTHONUNBUFFERED=1
    command: uv run uvicorn main:app --host 0.0.0.0 --port 23245 --reload
    volumes:
      - ..:/app
    restart: "no"

  movienite-web:
    image: oven/bun:1.3.6-alpine
    container_name: movienite-web-dev
    working_dir: /app
    command: sh -c "bun install --frozen-lockfile && bun run dev --host 0.0.0.0 --port 5173"
    ports:
      - "5173:5173"
    environment:
      - CHOKIDAR_USEPOLLING=1
    volumes:
      - ../frontend:/app
      - bun-node-modules:/app/node_modules
      - bun-cache:/root/.bun
    networks:
      - movienite-frontend
    depends_on:
      - movienite-api
    restart: "no"

volumes:
  bun-node-modules:
  bun-cache:
